import json
from dataclasses import dataclass, field
from typing import Sequence

from common import secure
from home.room import Room
from implementations.xiaomi import Gateway, SwitchSensor, MotionSensor, ThermometerSensor
from interfaces.appliance import Appliance
from interfaces.connection import HostPort
from interfaces.home import Home

HFA_HOME_ID = 'HFA'
HFA_REMOTE_HOST = secure("kYQ2b4Yf")


@dataclass
class HFA(Home):
    appliances: Sequence[Appliance] = field(default=(
        Gateway(
            friendly_name="Gateway",
            home=HFA_HOME_ID,
            room=Room.BEDROOM,
            host_port=HostPort(
                remote_host=HFA_REMOTE_HOST,
                remote_port=secure("LN3TvFY7"),
                local_host=secure("9Dspm6FH"),
                local_port=9898,
            ),
            internal_id=secure("9v2wrqcA"),
            key=secure("jqXSLd39"),
            child_devices=(
                SwitchSensor(
                    internal_id=secure('5rbf0dJm'),
                    friendly_name='Doorbell',
                    home=HFA_HOME_ID,
                    room=Room.OUTSIDE,
                ),
                SwitchSensor(
                    internal_id=secure('o9SRKsIG'),
                    friendly_name='Living room',
                    home=HFA_HOME_ID,
                    room=Room.LIVING_ROOM,
                ),
                MotionSensor(
                    internal_id=secure('72HFJAxG'),
                    friendly_name='Hallway',
                    home=HFA_HOME_ID,
                    room=Room.HALLWAY,
                ),
                SwitchSensor(
                    internal_id=secure('CI0Uq9Cs'),
                    friendly_name='Bedroom',
                    home=HFA_HOME_ID,
                    room=Room.BEDROOM,
                ),
                ThermometerSensor(
                    internal_id=secure('aDZAXzXY'),
                    friendly_name='Living Room',
                    home=HFA_HOME_ID,
                    room=Room.LIVING_ROOM,
                ),
                ThermometerSensor(
                    internal_id=secure('DGPxmdP2'),
                    friendly_name='Bedroom',
                    home=HFA_HOME_ID,
                    room=Room.BEDROOM,
                ),
            ),
        ),
    ))


if __name__ == '__main__':
    hfa = HFA()
    sw = hfa.sensors[3]

    for i in range(4, 6):
        print(f"{hfa.sensors[i].friendly_name} temperature {hfa.sensors[i].temperature} humidity {hfa.sensors[i].humidity}")

    # print(json.dumps(hfa.sensors, indent=4, default=str))

    #>>> ir_on
    #b'&\x00\x10\x01\x00\x01\x0b\x905\x15\x148\x148\x13?\x0c;\x11;\x11;\x14>5\x12\x11;\x148\x14?\x0e8\x1489\x13\x12A\x0b;9\x139\x139\x1a\x0e87\x16\x138\x14?\x0b;\x148\x148\x13@\x0e8\x148\x148\x13@\x0b;\x148\x148\x13@\x0b;\x139\x149\x13=\r;\x139\x13:\x13?3\x139\x13\x13:\x13?\x0b;\x139\x13:\x13?\x0b;\x149\x12:\x13?3\x13\x13:\x12:9\x193\x13\x13:\x12:\x138;\x00\x04i\x00\x01\x0e\x8f6\x13\x13:\x12:\x10B\x0e9\x12:\x10<\x13?3\x14\x12:\x12:\x13?\x0e9\x12:9\x13\x13?\r:8\x149\x139\x1a\x0c:8\x14\x139\x13@\r9\x10<\x139\x11B\x0e8\x10<\x10<\x10C\r9\x12:\x139\x13@\x0e8\x10<\x139\x13@\x0e8\x10<\x139\x11B3\x139\x13\x13:\x12@\x0e8\x139\x13:\x10@\x108\x10<\x13:\x10B3\x13\x10<\x10=6\x1c4\x12\x10=\x10<\x10;;\x00\r\x05\x00\x00\x00\x00\x00\x00\x00\x00'

    #>>> ir_off
    #b'&\x00\x10\x01\x00\x01\n\x925\x15\x11;\x11;\x12@\x0c;\x11;\x11;\x12@2\x15\x12:\x139\x12@\x0c;\x12:8\x14\x12@\x0c;8\x149\x138\x1b\x0b;7\x15\x12:\x12A\x0b;\x139\x139\x12A\x0b;\x11;\x12:\x12A\x0b;\x139\x12:\x12A\x0c:\x12:\x12:\x12A\x0b:\x13:\x12;\x11A\x0b;\x12:8\x148\x1b\x0c:\x12:\x12;\x11A\x0b;\x139\x12;\x11A\x0c:7\x16\x11;\x13?\x0c:8\x15\x11;\x1299\x00\x04i\x00\x01\n\x925\x15\x12:\x12:\x12A\x0b;\x12:\x12;\x10B2\x14\x12:\x12;\x12@\x0c:\x12:7\x16\x11A\x0c:7\x158\x158\x1a\x0c:8\x15\x11;\x11A\x0c:\x12;\x12:\x12@\x0c:\x12;\x11;\x12@\x0c:\x12;\x11;\x12@\x0c:\x12;\x12:\x12@\x133\x12;\x12:\x12@\x0c;\x11;8\x148\x1a\x0c;\x11;\x12:\x13?\x0c;\x11;\x12:\x12A\x0b;8\x14\x12:\x12A\x0b;7\x15\x12:\x12:7\x00\r\x05\x00\x00\x00\x00\x00\x00\x00\x00'

"""
>>> ir_on
b'&\x00\x10\x01\x00\x01\x0b\x905\x15\x148\x148\x13?\x0c;\x11;\x11;\x14>5\x12\x11;\x148\x14?\x0e8\x1489\x13\x12A\x0b;9\x139\x139\x1a\x0e87\x16\x138\x14?\x0b;\x148\x148\x13@\x0e8\x148\x148\x13@\x0b;\x148\x148\x13@\x0b;\x139\x149\x13=\r;\x139\x13:\x13?3\x139\x13\x13:\x13?\x0b;\x139\x13:\x13?\x0b;\x149\x12:\x13?3\x13\x13:\x12:9\x193\x13\x13:\x12:\x138;\x00\x04i\x00\x01\x0e\x8f6\x13\x13:\x12:\x10B\x0e9\x12:\x10<\x13?3\x14\x12:\x12:\x13?\x0e9\x12:9\x13\x13?\r:8\x149\x139\x1a\x0c:8\x14\x139\x13@\r9\x10<\x139\x11B\x0e8\x10<\x10<\x10C\r9\x12:\x139\x13@\x0e8\x10<\x139\x13@\x0e8\x10<\x139\x11B3\x139\x13\x13:\x12@\x0e8\x139\x13:\x10@\x108\x10<\x13:\x10B3\x13\x10<\x10=6\x1c4\x12\x10=\x10<\x10;;\x00\r\x05\x00\x00\x00\x00\x00\x00\x00\x00'
>>> ir_off
b'&\x00\x10\x01\x00\x01\n\x925\x15\x11;\x11;\x12@\x0c;\x11;\x11;\x12@2\x15\x12:\x139\x12@\x0c;\x12:8\x14\x12@\x0c;8\x149\x138\x1b\x0b;7\x15\x12:\x12A\x0b;\x139\x139\x12A\x0b;\x11;\x12:\x12A\x0b;\x139\x12:\x12A\x0c:\x12:\x12:\x12A\x0b:\x13:\x12;\x11A\x0b;\x12:8\x148\x1b\x0c:\x12:\x12;\x11A\x0b;\x139\x12;\x11A\x0c:7\x16\x11;\x13?\x0c:8\x15\x11;\x1299\x00\x04i\x00\x01\n\x925\x15\x12:\x12:\x12A\x0b;\x12:\x12;\x10B2\x14\x12:\x12;\x12@\x0c:\x12:7\x16\x11A\x0c:7\x158\x158\x1a\x0c:8\x15\x11;\x11A\x0c:\x12;\x12:\x12@\x0c:\x12;\x11;\x12@\x0c:\x12;\x11;\x12@\x0c:\x12;\x12:\x12@\x133\x12;\x12:\x12@\x0c;\x11;8\x148\x1a\x0c;\x11;\x12:\x13?\x0c;\x11;\x12:\x12A\x0b;8\x14\x12:\x12A\x0b;7\x15\x12:\x12:7\x00\r\x05\x00\x00\x00\x00\x00\x00\x00\x00'

"""
